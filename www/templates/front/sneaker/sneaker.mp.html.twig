{% extends 'base_front.html.twig' %}

{% block title %}SNKER - BUY {{ sneaker.name}} {{sneaker.fromShop ? 'from the Shop' : 'on the marketplace' }} {% endblock %}

{% block body %}

<div class="container">
    <div class="left">
        <h1>{{sneaker.name}}</h1>
        <h3>{{ sneaker.brand.name }} - FUTUR MODEL DISPLAYED HERE</h3>
        <div class="images">
            <div id="images-column">
                {% if( sneaker.getImages() is not empty) %}
                    {% for image in sneaker.getImages %}
                        <img src="{{ vich_uploader_asset(image) }}" />
                    {% endfor %}
                {% endif %}
            </div>
            {% if( sneaker.getImages() is not empty) %}
                <img id="main-picture" src="{{ vich_uploader_asset(sneaker.getImages()[0]) }}" alt="{{ sneaker. name }}" />
            {% endif %}
        </div>
        <h3>Description</h3>
        {{ sneaker.description }}
    </div>
    <div class="right">
        <span>{{sneaker.publicationDate is empty ? "" : sneaker.publicationDate|date("m/d/Y")}}</span>
        <span>Provided by <a href="{{  path('front_profile', { 'id': sneaker.publisher.id }) }}">{{ sneaker.publisher.name??'Unknown' }} {{ sneaker.publisher.surname }}</a></span>
        {% if(not sold) %}
            <a href="{{ path('marketplace_product_checkout', {'id': sneaker.id }) }}">
                <button>${{ sneaker.price }} - BUY NOW</button>
            </a>
        {% else %}
            <h4>Sold</h4>
        {%  endif %}

        <div>
            <div>
                <h4>Materials</h4>
                {%  if(sneaker.getMaterials is not empty) %}

                {% else %}
                    <span>Not specified</span>
                {% endif %}
            </div>
            <div>
                <h4>Colors</h4>
                {%  if(sneaker.getColors is not empty) %}

                {% else %}
                    <span>Not specified</span>
                {% endif %}
            </div>
        </div>

    </div>

</div>

<style>
    .container{
        display: flex;
    }

    .left{
        width: 60%;
    }

    .left > .images > #images-column{
        display: flex;
        flex-direction: column;
        /*justify-content: space-between;*/
        width: 20%;
    }

    .left > .images > #images-column > img{
        cursor: pointer;
        margin-bottom: 10px;
    }

    .left > .images > img{
        width: 80%;
        height: 500px;
        object-fit: cover;
    }

    .left > .images {
        display: flex;
    }

    .right{
        width: 35%;
    }
</style>

<script>
    let mainImage = document.getElementById('main-picture');
    let imagesList = document.getElementById('images-column').children;
    for( let imgItem of imagesList){
        imgItem.addEventListener( 'click', () => {
            mainImage.setAttribute('src', imgItem.getAttribute('src'));
        });
    }
</script>

{% endblock %}